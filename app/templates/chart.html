<!DOCTYPE HTML>
<html>
<head>
    <title>管理控制台</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="keywords" content="三峡大学失物招领中心"/>

    <script type="application/x-javascript">
    addEventListener("load", function() {
        setTimeout(hideURLbar, 0);
    }, false);
    function hideURLbar() {
        window.scrollTo(0, 1);
    }
    </script>
    <!-- Bootstrap Core CSS -->
        <link href=" https://cdn.bootcss.com/twitter-bootstrap/3.3.4/css/bootstrap.min.css" rel='stylesheet' type='text/css'/>

    <!-- Custom CSS -->
    <link href="../static/css/style.css" rel='stylesheet' type='text/css'/>
    <!-- font CSS -->
    <!-- font-awesome icons -->
    <link href="../static/css/font-awesome.css" rel="stylesheet">
    <!-- //font-awesome icons -->
    <!-- js-->
        <script src="https://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
    <script src="../static/js/modernizr.custom.js"></script>
    <!--webfonts-->
    <!--//webfonts-->
    <!--animate-->
    <link href="../static/css/animate.css" rel="stylesheet" type="text/css" media="all">
    <script src="../static/js/wow.min.js"></script>
    <script>
        new WOW().init();
    </script>
    <!--//end-animate-->
    <!-- chart -->
    <script src="../static/js/Chart.js"></script>
    <!-- //chart -->
    <!--Calender-->
    <!--<link rel="stylesheet" href="css/clndr.css" type="text/css" />-->
    <script src="../static/js/underscore-min.js" type="text/javascript"></script>
    <script src="../static/js/moment-2.2.1.js" type="text/javascript"></script>
    <!--<script src="js/clndr.js" type="text/javascript"></script>-->
    <script src="../static/js/site.js" type="text/javascript"></script>
    <!--End Calender-->
    <!-- Metis Menu -->
    <script src="../static/js/metisMenu.min.js"></script>
    <script src="../static/js/custom.js"></script>
    <link href="../static/css/custom.css" rel="stylesheet">
    <!--//Metis Menu -->
    <style>
        * { touch-action: pan-y; }
span.nav-badge-btm {
    font-size: 12px;
    color: #FFF;
    background: #F2B33F;
    position: absolute;
    top: 18%;
    right: 15%;
    line-height: 22px;
    letter-spacing: 1px;
    text-align: center;
    padding: 0em 1em;
}
    </style>
</head>
{% autoescape false %}

<body class="cbp-spmenu-push">
<div class="main-content">
    <!--left-fixed -navigation-->
    <div class=" sidebar" role="navigation">
        <div class="navbar-collapse">
            <nav class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-left" id="cbp-spmenu-s1">
                <ul class="nav" id="side-menu">
                    <li>
                        <a href="/chart.html" class="active"><i class="fa fa-bar-chart nav_icon"></i>数据统计</a>
                    </li>
                    <li>
                        <a href="#"><i class="fa fa-list-ul nav_icon"></i>招领管理<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level collapse">
                            <li>
                                <a href="/found.html">招领启事</a>
                            </li>
                             <li>
                                <a href="/report.html">报表导出</a>
                            </li>
                             <li>
                                <a href="/tool.html">图片压缩</a>
                            </li>
                            <li>
                                <a href="/category.html">类别管理
                                    <!--<span class="nav-badge-btm">8</span>-->
                                </a>
                            </li>
                        </ul>
                        <!-- /nav-second-level -->
                    </li>
                    <li>
                        <a href="/userlist.html"><i class="fa fa-users nav_icon"></i>用户管理</a>
                    </li>
                    <li>
                        <a href="/notice.html"><i class="fa fa-send-o nav_icon"></i>公告管理</a>
                    </li>
                    <li>
                    <a href="/#"><i class="fa fa-university nav_icon"></i>用户主页</a>

                    </li>
                    <li>
                        <a href="/feedback.html"><i class="fa fa-envelope nav_icon"></i>反馈管理
                            <!--<span class="nav-badge-btm">08</span>-->
                        </a>
                        {% if newCount!=0 %}
<span class="nav-badge-btm">{{ newCount }}</span>
                        {% endif %}
                        <!-- //nav-second-level -->
                    </li>
                    <li v-if="user.kind==3">
                        <a href="#"><i class="fa fa-dashboard nav_icon "></i>日志管理<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level collapse">
                                <li><a href="/log.html?type=admin">操作日志</a></li>
                               <li><a href="/log.html?type=error">错误日志</a></li>
                                <li><a href="/log.html?type=info">请求日志</a></li>
                        </ul>
                    </li>
                    <li class="visible-xs-block">
                        <a href="#" onclick="logout()"><i class="fa fa-sign-out nav_icon"></i>安全退出</a>
                    </li>

                </ul>
                <!-- //sidebar-collapse -->
            </nav>
        </div>
    </div>
    <!--left-fixed -navigation-->
    <!-- header-starts -->
    <div class="sticky-header header-section" id="app">
        <div class="header-left">
            <!--toggle button start-->
            <button id="showLeftPush"><i class="fa fa-bars"></i></button>
            <!--toggle button end-->
            <!--logo -->
            <div class="logo">
                <a href="/chart.html">
                    <h1>三峡大学失物招领中心</h1>
                    <span>管理控制台</span>
                </a>
            </div>
            <div class="clearfix"></div>
        </div>
        <div class="header-right">
            <div class="profile_details visible-lg-block">
                <ul>
                    <li class="dropdown profile_details_drop">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                            <div class="profile_img">
									<span class="prfil-img">
										<img :src="user.icon"
                                             style="max-width: 50px; max-height: 50px;">
									</span>
                                <div class="user-name">
                                    <p v-if="user.kind==2 ">{{"管理员 "+user.realName}}</p>
                                    <p v-else="user.kind==3 ">{{"超级管理员 "+user.realName}}</p>
                                    <span>{{user.studentNum}}</span>
                                </div>
                                <i class="fa fa-angle-down lnr"></i>
                                <i class="fa fa-angle-up lnr"></i>
                                <div class="clearfix"></div>
                            </div>
                        </a>
                        <ul class="dropdown-menu drp-mnu">
                            <!--<li><a ><i class="fa fa-cog"></i> Settings</a></li>-->
                            <!--<li><a ><i class="fa fa-user"></i> Profile</a></li>-->
                            <li><a @click="logout"><i class="fa fa-sign-out"></i>退出</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="clearfix"></div>
        </div>
        <div class="clearfix"></div>
    </div>
    <!-- //header-ends -->
    <!-- page content start-->
    <div id="page-wrapper">
        <div class="main-page">
            <div class="row-one">
                <div class="col-md-3 widget">
                    <div class="stats-left ">
                        <h5>今日失物：{{ data.lost[0] }}</h5>
                        <h4>总计：{{ data.lost[1] }}</h4>
                    </div>
                    <div class="stats-right">
                        <label>+{{ data.lost[0] }}</label>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="col-md-3 widget states-mdl">
                    <div class="stats-left" style="background-color: #e94e02;">
                        <h5>今日拾物：{{ data.found[0] }}</h5>
                        <h4>总计：{{ data.found[1] }}</h4>
                    </div>
                    <div class="stats-right" style="background-color: #d14a00;">
                        <label>+{{ data.found[0] }}</label>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="col-md-3 widget states-last">
                    <div class="stats-left" style="background-color: #3dab53">
                        <h5>今日寻回：{{ data.solve[0] }}</h5>
                        <h4>总计：{{ data.solve[1] }}</h4>
                    </div>
                    <div class="stats-right" style="background-color: #1d9b13">
                        <label>+{{ data.solve[0] }}</label>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="charts">
                <div class="col-md-4 charts-grids widget">
                    <h4 class="title">近期数据</h4>
                    <canvas id="bar1" height="300" width="400"></canvas>
                </div>
                <div class="col-md-4 charts-grids widget states-mdl">
                    <h4 class="title">近期趋势</h4>
                    <canvas id="line1" height="300" width="400"></canvas>
                </div>
                <div class="col-md-4 charts-grids widget">
                    <h4 class="title">事件比例</h4>
                    <canvas id="pie1" height="300" width="400"></canvas>
                </div>
                <div class="clearfix"></div>
                <script>
                    //近期数据
                    var barChartData1 = {
                        labels: {{ data.dayLabels }},
                        datasets: [
                            {
                                fillColor: "#4F52BA",
                                strokeColor: "#4F52BA",
                                highlightFill: "#4F52BA",
                                highlightStroke: "#4F52BA",
                                data:{{ data.data1[0] }}
                            },
                            {
                                fillColor: "#e94e02",
                                strokeColor: "#e94e02",
                                highlightFill: "#e94e02",
                                highlightStroke: "#e94e02",
                                data: {{ data.data1[1] }}
                            },
                            {
                                fillColor: "#3dab53",
                                strokeColor: "#3dab53",
                                highlightFill: "#3dab53",
                                highlightStroke: "#3dab53",
                                data: {{ data.data1[2] }}
                            }
                        ]

                    };
                    //近期趋势
                    var lineChartData1 = {
                        labels:{{ data.dayLabels }},
                        {#labels:  ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],#}
                        datasets: [
                            {
                                fillColor: "rgba(79, 82, 186, 0.9)",
                                strokeColor: "rgba(79, 82, 186, 0.9)",
                                pointColor: "rgba(79, 82, 186, 0.9)",
                                pointStrokeColor: "#fff",
                                data: {{ data.data1[0] }}

                            },
                            {
                                fillColor: "rgba(233, 78, 2, 0.9)",
                                strokeColor: "rgba(233, 78, 2, 0.9)",
                                pointColor: "rgba(233, 78, 2, 0.9)",
                                pointStrokeColor: "#9358ac",
                                data: {{ data.data1[1] }}

                            },
                            {
                                fillColor: "#3dab53",
                                strokeColor: "#3dab53",
                                pointColor: "#3dab53",
                                pointStrokeColor: "#9358ac",
                                data: {{ data.data1[2] }}

                            }
                        ]

                    };
                    //失物，拾取，解决占比
                    var pieData1 = [
                        {
                            value: {{ data.data3[0] }},
                            color: "#4F52BA",
                            label: "失物",
                            percentageInnerCutout: 50
                        },
                        {
                            value: {{ data.data3[1] }},
                            color: "#e94e02",
                            label: "拾物",
                            percentageInnerCutout: 50
                        },
                        {
                            value: {{ data.data3[2] }},
                            color: "#3dab53",
                            label: "寻回",
                            percentageInnerCutout: 0
                        }
                    ];

                    var line1 = new Chart(document.getElementById("line1").getContext("2d")).Line(lineChartData1, {pointDot: true});
                    new Chart(document.getElementById("bar1").getContext("2d")).Bar(barChartData1);
                    new Chart(document.getElementById("pie1").getContext("2d")).Pie(pieData1, {percentageInnerCutout: 50});

                </script>

            </div>
            <div class="charts">
                <div class="col-md-4 charts-grids widget">
                    <h4 class="title">用户总量</h4>
                    <canvas id="line2" height="300" width="400"></canvas>
                </div>
                <div class="col-md-4 charts-grids widget  states-mdl">
                    <h4 class="title">活跃用户</h4>
                    <canvas id="line3" height="300" width="400"></canvas>
                </div>
                <div class="col-md-4 charts-grids widget">
                    <h4 class="title">性别比例</h4>
                    <canvas id="pie2" height="300" width="400"></canvas>
                </div>
                <div class="clearfix"></div>
                <script>
                    //用户数量
                    var lineChartData2 = {
                        {#labels:  ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],#}
                        labels:  {{ data.dayLabels }},
                        datasets: [
                            {
                                fillColor: "#2673ec",
                                strokeColor: "rgba(79, 82, 186, 0.9)",
                                pointColor: "rgba(79, 82, 186, 0.9)",
                                pointStrokeColor: "#fff",
                                data:  {{ data.data4 }}
                            }
                        ]
                    };
                    //活跃用户
                    var lineChartData3 = {
                        labels:{{ data.dayLabels }},
                        {#labels:  ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],#}
                        datasets: [
                            {
                                fillColor: "#00b5ad",
                                strokeColor: "rgba(79, 82, 186, 0.9)",
                                pointColor: "#00b5ad",
                                pointStrokeColor: "#fff",
                                data: {{ data.data5[0] }}

                            },
                            {
                                fillColor: "#e03997",
                                strokeColor: "rgba(233, 78, 2, 0.9)",
                                pointColor: "#e03997",
                                pointStrokeColor: "#9358ac",
                                data:  {{ data.data5[1] }}
                            }
                        ]

                    };
                //性别比例
                    var pieData2 = [
                        {
                            value:  {{ data.data6[0] }},
                            color: "#00b5ad",
                            label: "男",
                            percentageInnerCutout: 50
                        },
                        {
                            value:  {{ data.data6[1] }},
                            color: "#e03997",
                            label: "女",
                            percentageInnerCutout: 50
                        }

                    ];

                    new Chart(document.getElementById("line2").getContext("2d")).Line(lineChartData2, {pointDot: true});
                    new Chart(document.getElementById("line3").getContext("2d")).Line(lineChartData3, {pointDot: true});
                    new Chart(document.getElementById("pie2").getContext("2d")).Pie(pieData2, {percentageInnerCutout: 50});

                </script>

            </div>
            <div class="clearfix"></div>
        </div>
    </div>
    <!--footer-->
    <div class="footer">
        <p>&copy;三峡大学失物招领中心 | <a href="https://tongji.baidu.com/web/welcome/ico?s=cadc146ea11d785cac889d32e36f336b" target="_blank">访问统计</a></p>    </div>
    <!--//footer-->
</div>
<!-- Classie -->
<script src="../static/js/classie.js"></script>
<!-- Bootstrap Core JavaScript -->
<script src="https://cdn.bootcss.com/twitter-bootstrap/3.3.4/js/bootstrap.js"></script>
<script src="https://cdn.bootcss.com/vue/2.4.2/vue.min.js"></script>
<script src="https://cdn.bootcss.com/layer/2.3/layer.js"></script>
<script src="../static/js/mine/common.js"></script>
<script src="../static/js/mine/data.js"></script>
<script>
     // hideLoading();
     $(function () {
        isAnonymous();
     })
</script>
{% endautoescape %}
</body>
</html>